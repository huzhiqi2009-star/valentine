<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>情人节惊喜</title>

<style>
*{box-sizing:border-box}

body{
  margin:0;
  background:#f7f8fa;
  font-family:"PingFang SC","Microsoft YaHei",sans-serif;
  min-height:320vh;
  overflow-x:hidden;
  color:#222;
}

/* ===== canvas 通用 ===== */
canvas{
  position:fixed;
  inset:0;
  z-index:0;
  pointer-events:none;
}

/* ===== 主容器 ===== */
.wrapper{
  position:relative;
  z-index:1;
  max-width:820px;
  margin:60px auto 120px;
  padding:56px 28px 100px;
  background:rgba(255,255,255,0.92);
  backdrop-filter: blur(10px);
  border-radius:26px;
  box-shadow:0 30px 80px rgba(0,0,0,.08);
}

/* ===== 标题 ===== */
h1{
  text-align:center;
  font-size:40px;
  margin:0 0 46px;
  letter-spacing:2px;
  opacity:0;
  transform:translateY(50px);
  animation:titleIn 1.8s ease forwards;
}
@keyframes titleIn{
  to{opacity:1;transform:none}
}

/* ===== 内容 ===== */
.content{
  font-size:17px;
  line-height:1.9;
}
.content p{
  margin:20px 0;
  opacity:0;
  transform:translateY(24px);
  animation:fadeUp 1.2s ease forwards;
}
@keyframes fadeUp{
  to{opacity:1;transform:none}
}
.content img{
  width:100%;
  border-radius:18px;
  margin:34px 0;
  box-shadow:0 20px 40px rgba(0,0,0,.12);
}

/* ===== 点击爱心 ===== */
.heart{
  text-align:center;
  font-size:64px;
  cursor:pointer;
  animation:beat 1.4s infinite;
  margin-bottom:6px;
  user-select:none;
}
@keyframes beat{
  0%{transform:scale(1)}
  50%{transform:scale(1.18)}
  100%{transform:scale(1)}
}
.tip{
  text-align:center;
  font-size:13px;
  color:#666;
  margin-bottom:36px;
}

/* ===== 最终告白 ===== */
#final{
  margin-top:160px;
  padding-top:60px;
  text-align:center;
  opacity:0;
  transform:translateY(60px);
  transition:1.8s cubic-bezier(.22,.61,.36,1);
}
#final.show{
  opacity:1;
  transform:none;
}
#final p{
  font-size:20px;
  line-height:2;
  letter-spacing:1px;
}
</style>
</head>

<body>

<!-- 星空 -->
<canvas id="stars"></canvas>
<!-- 爱心粒子 -->
<canvas id="hearts"></canvas>

<div class="wrapper">

<h1>亲爱的 薛雯心</h1>

<div class="heart" onclick="playMusic()">❤️</div>
<div class="tip">（点一下爱心）</div>

<div class="content">
<p>当时的我以为我再也没有了爱情，直到我遇到了你。</p>
<p>在星辰的呢喃中，我找到了你的影子，如月光般温柔。</p>
<p>你是我诗篇中最美的韵脚。</p>
<p>你的笑容点亮了我所有的黎明与黄昏。</p>
<p>很幸运能遇到你，即使有矛盾，也会慢慢化开。</p>

<img src="a.jpg">

<p>有时希望世界上就只剩我和你。</p>

<img src="b.jpg">
<img src="c.jpg">

<p>哈哈，这是那次的照片，虽然模糊，但那份开心我永远记得。</p>

<div id="final">
<p>
永远爱你<br>
胡智祈
</p>
</div>
</div>

</div>

<!-- 音乐 -->
<audio id="bgm" loop>
<source src="https://m701.music.126.net/20260208133736/4ff4bd0de2221040e45f753b5475f084/jdymusic/obj/wo3DlMOGwrbDjj7DisKw/61133642103/dc0f/e8d6/dd47/733717efaa6ff235d52a0154f8d5c595.mp3">
</audio>

<script>
/* ===== 音乐渐入 + 震动 ===== */
function playMusic(){
  const m=document.getElementById("bgm");
  m.volume=0;
  m.play();
  let v=0;
  const fade=setInterval(()=>{
    v+=0.02;
    m.volume=Math.min(v,0.5);
    if(v>=0.5)clearInterval(fade);
  },120);
  navigator.vibrate && navigator.vibrate([60,30,60]);
}

/* ===== 滚动显示告白 ===== */
addEventListener("scroll",()=>{
  const f=document.getElementById("final");
  if(scrollY+innerHeight>document.body.scrollHeight-140){
    f.classList.add("show");
    navigator.vibrate && navigator.vibrate([120,60,120]);
  }
});

/* ===== 星空 ===== */
const sc=document.getElementById("stars"), sctx=sc.getContext("2d");
let sw,sh,stars=[];
function resize(){
  sw=sc.width=innerWidth;
  sh=sc.height=innerHeight;
}
resize(); addEventListener("resize",resize);
for(let i=0;i<160;i++){
  stars.push({x:Math.random()*sw,y:Math.random()*sh,r:Math.random()*1.6+.4,s:Math.random()*.5+.15,o:Math.random()*.5+.3});
}
function drawStars(){
  sctx.clearRect(0,0,sw,sh);
  stars.forEach(s=>{
    sctx.fillStyle=`rgba(120,150,255,${s.o})`;
    sctx.beginPath();
    sctx.arc(s.x,s.y,s.r,0,Math.PI*2);
    sctx.fill();
    s.y+=s.s;
    if(s.y>sh){s.y=0;s.x=Math.random()*sw}
  });
  requestAnimationFrame(drawStars);
}
drawStars();

/* ===== 爱心粒子 ===== */
const hc=document.getElementById("hearts"), hctx=hc.getContext("2d");
let hw,hh,hearts=[];
function resizeH(){
  hw=hc.width=innerWidth;
  hh=hc.height=innerHeight;
}
resizeH(); addEventListener("resize",resizeH);

function newHeart(){
  return{
    x:Math.random()*hw,
    y:hh+20,
    s:8+Math.random()*14,
    v:0.6+Math.random()*1.2,
    d:(Math.random()-.5)*0.6,
    a:.4+Math.random()*.6
  }
}
for(let i=0;i<36;i++)hearts.push(newHeart());

function drawHeart(x,y,s,a){
  hctx.save();
  hctx.translate(x,y);
  hctx.scale(s/20,s/20);
  hctx.beginPath();
  hctx.moveTo(0,0);
  hctx.bezierCurveTo(0,-3,-5,-3,-5,0);
  hctx.bezierCurveTo(-5,3,0,6,0,9);
  hctx.bezierCurveTo(0,6,5,3,5,0);
  hctx.bezierCurveTo(5,-3,0,-3,0,0);
  hctx.fillStyle=`rgba(255,105,180,${a})`;
  hctx.fill();
  hctx.restore();
}
function drawHearts(){
  hctx.clearRect(0,0,hw,hh);
  hearts.forEach((p,i)=>{
    p.y-=p.v; p.x+=p.d;
    drawHeart(p.x,p.y,p.s,p.a);
    if(p.y<-20)hearts[i]=newHeart();
  });
  requestAnimationFrame(drawHearts);
}
drawHearts();
</script>

</body>
</html>
